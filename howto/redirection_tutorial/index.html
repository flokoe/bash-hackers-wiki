<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://flokoe.github.io/bash-hackers-wiki/howto/redirection_tutorial/ rel=canonical><link href=../pax/ rel=prev><link href=../testing-your-scripts/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.5.44"><title>Illustrated Redirection Tutorial - The Bash Hackers Wiki</title><link rel=stylesheet href=../../assets/stylesheets/main.0253249f.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#illustrated-redirection-tutorial class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="The Bash Hackers Wiki" class="md-header__button md-logo" aria-label="The Bash Hackers Wiki" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> The Bash Hackers Wiki </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Illustrated Redirection Tutorial </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/flokoe/bash-hackers-wiki title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> flokoe/bash-hackers-wiki </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Start </a> </li> <li class=md-tabs__item> <a href=../../commands/classictest/ class=md-tabs__link> Commands </a> </li> <li class=md-tabs__item> <a href=../../dict/directory/ class=md-tabs__link> Dict </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../calculate-dc/ class=md-tabs__link> Howto </a> </li> <li class=md-tabs__item> <a href=../../internals/shell_options/ class=md-tabs__link> Internals </a> </li> <li class=md-tabs__item> <a href=../../misc/bashphorisms/ class=md-tabs__link> Misc </a> </li> <li class=md-tabs__item> <a href=../../scripting/bashbehaviour/ class=md-tabs__link> Scripting </a> </li> <li class=md-tabs__item> <a href=../../snipplets/ class=md-tabs__link> Snipplets </a> </li> <li class=md-tabs__item> <a href=../../syntax/arith_expr/ class=md-tabs__link> Syntax </a> </li> <li class=md-tabs__item> <a href=../../tags/ class=md-tabs__link> Tags </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="The Bash Hackers Wiki" class="md-nav__button md-logo" aria-label="The Bash Hackers Wiki" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> The Bash Hackers Wiki </label> <div class=md-nav__source> <a href=https://github.com/flokoe/bash-hackers-wiki title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> flokoe/bash-hackers-wiki </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Start </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Commands </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Commands </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../commands/classictest/ class=md-nav__link> <span class=md-ellipsis> The classic test command </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> Builtin </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Builtin </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../commands/builtin/caller/ class=md-nav__link> <span class=md-ellipsis> The caller builtin command </span> </a> </li> <li class=md-nav__item> <a href=../../commands/builtin/cd/ class=md-nav__link> <span class=md-ellipsis> The cd builtin command </span> </a> </li> <li class=md-nav__item> <a href=../../commands/builtin/declare/ class=md-nav__link> <span class=md-ellipsis> The declare builtin command </span> </a> </li> <li class=md-nav__item> <a href=../../commands/builtin/echo/ class=md-nav__link> <span class=md-ellipsis> The echo builtin command </span> </a> </li> <li class=md-nav__item> <a href=../../commands/builtin/eval/ class=md-nav__link> <span class=md-ellipsis> The eval builtin command </span> </a> </li> <li class=md-nav__item> <a href=../../commands/builtin/exec/ class=md-nav__link> <span class=md-ellipsis> The exec builtin command </span> </a> </li> <li class=md-nav__item> <a href=../../commands/builtin/exit/ class=md-nav__link> <span class=md-ellipsis> The exit builtin command </span> </a> </li> <li class=md-nav__item> <a href=../../commands/builtin/export/ class=md-nav__link> <span class=md-ellipsis> The export builtin command </span> </a> </li> <li class=md-nav__item> <a href=../../commands/builtin/kill/ class=md-nav__link> <span class=md-ellipsis> The kill builtin command </span> </a> </li> <li class=md-nav__item> <a href=../../commands/builtin/let/ class=md-nav__link> <span class=md-ellipsis> The let builtin command </span> </a> </li> <li class=md-nav__item> <a href=../../commands/builtin/local/ class=md-nav__link> <span class=md-ellipsis> The local builtin command </span> </a> </li> <li class=md-nav__item> <a href=../../commands/builtin/mapfile/ class=md-nav__link> <span class=md-ellipsis> The mapfile builtin command </span> </a> </li> <li class=md-nav__item> <a href=../../commands/builtin/printf/ class=md-nav__link> <span class=md-ellipsis> The printf command </span> </a> </li> <li class=md-nav__item> <a href=../../commands/builtin/read/ class=md-nav__link> <span class=md-ellipsis> The read builtin command </span> </a> </li> <li class=md-nav__item> <a href=../../commands/builtin/readonly/ class=md-nav__link> <span class=md-ellipsis> The readonly builtin command </span> </a> </li> <li class=md-nav__item> <a href=../../commands/builtin/return/ class=md-nav__link> <span class=md-ellipsis> The return builtin command </span> </a> </li> <li class=md-nav__item> <a href=../../commands/builtin/set/ class=md-nav__link> <span class=md-ellipsis> The set builtin command </span> </a> </li> <li class=md-nav__item> <a href=../../commands/builtin/shift/ class=md-nav__link> <span class=md-ellipsis> The shift builtin command </span> </a> </li> <li class=md-nav__item> <a href=../../commands/builtin/shopt/ class=md-nav__link> <span class=md-ellipsis> The shopt builtin command </span> </a> </li> <li class=md-nav__item> <a href=../../commands/builtin/trap/ class=md-nav__link> <span class=md-ellipsis> The trap builtin command </span> </a> </li> <li class=md-nav__item> <a href=../../commands/builtin/unset/ class=md-nav__link> <span class=md-ellipsis> The unset builtin command </span> </a> </li> <li class=md-nav__item> <a href=../../commands/builtin/wait/ class=md-nav__link> <span class=md-ellipsis> The wait builtin command </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Dict </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Dict </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../dict/directory/ class=md-nav__link> <span class=md-ellipsis> Directory </span> </a> </li> <li class=md-nav__item> <a href=../../dict/end_of_options/ class=md-nav__link> <span class=md-ellipsis> End of Options </span> </a> </li> <li class=md-nav__item> <a href=../../dict/exit_status/ class=md-nav__link> <span class=md-ellipsis> Exit Status </span> </a> </li> <li class=md-nav__item> <a href=../../dict/file/ class=md-nav__link> <span class=md-ellipsis> File </span> </a> </li> <li class=md-nav__item> <a href=../../dict/filetimes/ class=md-nav__link> <span class=md-ellipsis> File timestamp </span> </a> </li> <li class=md-nav__item> <a href=../../dict/globbing/ class=md-nav__link> <span class=md-ellipsis> Globbing </span> </a> </li> <li class=md-nav__item> <a href=../../dict/hardlink/ class=md-nav__link> <span class=md-ellipsis> Hardlink </span> </a> </li> <li class=md-nav__item> <a href=../../dict/interpreter_directive/ class=md-nav__link> <span class=md-ellipsis> Interpreter Directive </span> </a> </li> <li class=md-nav__item> <a href=../../dict/parameter/ class=md-nav__link> <span class=md-ellipsis> Parameter </span> </a> </li> <li class=md-nav__item> <a href=../../dict/posix/ class=md-nav__link> <span class=md-ellipsis> POSIX </span> </a> </li> <li class=md-nav__item> <a href=../../dict/shell/ class=md-nav__link> <span class=md-ellipsis> Shell </span> </a> </li> <li class=md-nav__item> <a href=../../dict/special_file/ class=md-nav__link> <span class=md-ellipsis> Special file </span> </a> </li> <li class=md-nav__item> <a href=../../dict/symlink/ class=md-nav__link> <span class=md-ellipsis> Symlink </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Howto </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Howto </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../calculate-dc/ class=md-nav__link> <span class=md-ellipsis> Calculating with dc </span> </a> </li> <li class=md-nav__item> <a href=../collapsing_functions/ class=md-nav__link> <span class=md-ellipsis> Collapsing Functions </span> </a> </li> <li class=md-nav__item> <a href=../conffile/ class=md-nav__link> <span class=md-ellipsis> Config files for your script </span> </a> </li> <li class=md-nav__item> <a href=../dissectabadoneliner/ class=md-nav__link> <span class=md-ellipsis> Dissect a bad oneliner </span> </a> </li> <li class=md-nav__item> <a href=../edit-ed/ class=md-nav__link> <span class=md-ellipsis> Editing files via scripts with ed </span> </a> </li> <li class=md-nav__item> <a href=../getopts_tutorial/ class=md-nav__link> <span class=md-ellipsis> Small getopts tutorial </span> </a> </li> <li class=md-nav__item> <a href=../mutex/ class=md-nav__link> <span class=md-ellipsis> Lock your script (against parallel execution) </span> </a> </li> <li class=md-nav__item> <a href=../pax/ class=md-nav__link> <span class=md-ellipsis> pax - the POSIX archiver </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Illustrated Redirection Tutorial </span> </a> </li> <li class=md-nav__item> <a href=../testing-your-scripts/ class=md-nav__link> <span class=md-ellipsis> Testing your scripts </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Internals </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Internals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../internals/shell_options/ class=md-nav__link> <span class=md-ellipsis> List of shell options </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Misc </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Misc </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../misc/bashphorisms/ class=md-nav__link> <span class=md-ellipsis> The Bashphorisms </span> </a> </li> <li class=md-nav__item> <a href=../../misc/readthesourceluke/ class=md-nav__link> <span class=md-ellipsis> Readthesourceluke </span> </a> </li> <li class=md-nav__item> <a href=../../misc/shell_humor/ class=md-nav__link> <span class=md-ellipsis> Shell Humor </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Scripting </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Scripting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../scripting/bashbehaviour/ class=md-nav__link> <span class=md-ellipsis> Bash's behaviour </span> </a> </li> <li class=md-nav__item> <a href=../../scripting/bashchanges/ class=md-nav__link> <span class=md-ellipsis> Bash changes </span> </a> </li> <li class=md-nav__item> <a href=../../scripting/basics/ class=md-nav__link> <span class=md-ellipsis> The basics of shell scripting </span> </a> </li> <li class=md-nav__item> <a href=../../scripting/debuggingtips/ class=md-nav__link> <span class=md-ellipsis> Debugging a script </span> </a> </li> <li class=md-nav__item> <a href=../../scripting/newbie_traps/ class=md-nav__link> <span class=md-ellipsis> Beginner Mistakes </span> </a> </li> <li class=md-nav__item> <a href=../../scripting/nonportable/ class=md-nav__link> <span class=md-ellipsis> Portability talk </span> </a> </li> <li class=md-nav__item> <a href=../../scripting/obsolete/ class=md-nav__link> <span class=md-ellipsis> Obsolete and deprecated syntax </span> </a> </li> <li class=md-nav__item> <a href=../../scripting/posparams/ class=md-nav__link> <span class=md-ellipsis> Handling positional parameters </span> </a> </li> <li class=md-nav__item> <a href=../../scripting/processtree/ class=md-nav__link> <span class=md-ellipsis> Bash and the process tree </span> </a> </li> <li class=md-nav__item> <a href=../../scripting/style/ class=md-nav__link> <span class=md-ellipsis> Scripting with style </span> </a> </li> <li class=md-nav__item> <a href=../../scripting/terminalcodes/ class=md-nav__link> <span class=md-ellipsis> Terminal codes (ANSI/VT100) introduction </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> Snipplets </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Snipplets </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../snipplets/ class=md-nav__link> <span class=md-ellipsis> Small code snipplets </span> </a> </li> <li class=md-nav__item> <a href=../../snipplets/add_color_to_your_scripts/ class=md-nav__link> <span class=md-ellipsis> Add Color to your scripts </span> </a> </li> <li class=md-nav__item> <a href=../../snipplets/awkcsv/ class=md-nav__link> <span class=md-ellipsis> Using awk to deal with CSV that uses quoted/unquoted delimiters </span> </a> </li> <li class=md-nav__item> <a href=../../snipplets/filesize/ class=md-nav__link> <span class=md-ellipsis> Show size of a file </span> </a> </li> <li class=md-nav__item> <a href=../../snipplets/kill_bg_job_without_message/ class=md-nav__link> <span class=md-ellipsis> Kill a background job without a message </span> </a> </li> <li class=md-nav__item> <a href=../../snipplets/largestfile/ class=md-nav__link> <span class=md-ellipsis> Get largest file </span> </a> </li> <li class=md-nav__item> <a href=../../snipplets/pause_command/ class=md-nav__link> <span class=md-ellipsis> Pausing a script (like MSDOS pause command) </span> </a> </li> <li class=md-nav__item> <a href=../../snipplets/prargs/ class=md-nav__link> <span class=md-ellipsis> Print argument list for testing </span> </a> </li> <li class=md-nav__item> <a href=../../snipplets/print_horizontal_line/ class=md-nav__link> <span class=md-ellipsis> Print a horizontal line </span> </a> </li> <li class=md-nav__item> <a href=../../snipplets/rndstr/ class=md-nav__link> <span class=md-ellipsis> Print a random string or select random elements </span> </a> </li> <li class=md-nav__item> <a href=../../snipplets/screen_saverestore/ class=md-nav__link> <span class=md-ellipsis> Save and restore terminal/screen content </span> </a> </li> <li class=md-nav__item> <a href=../../snipplets/ssh_fetchkeys/ class=md-nav__link> <span class=md-ellipsis> Fetching SSH hostkeys without interaction </span> </a> </li> <li class=md-nav__item> <a href=../../snipplets/ssh_local_var/ class=md-nav__link> <span class=md-ellipsis> Run some bash commands with SSH remotely using local variables </span> </a> </li> <li class=md-nav__item> <a href=../../snipplets/wrapperargs/ class=md-nav__link> <span class=md-ellipsis> Generate code with own arguments properly quoted </span> </a> </li> <li class=md-nav__item> <a href=../../snipplets/xclip/ class=md-nav__link> <span class=md-ellipsis> X-Clipboard on Commandline </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex=0> <span class=md-ellipsis> Syntax </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Syntax </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../syntax/arith_expr/ class=md-nav__link> <span class=md-ellipsis> Arithmetic expressions </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/arrays/ class=md-nav__link> <span class=md-ellipsis> Arrays </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/basicgrammar/ class=md-nav__link> <span class=md-ellipsis> Basic grammar rules of Bash </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/pattern/ class=md-nav__link> <span class=md-ellipsis> Patterns and pattern matching </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/pe/ class=md-nav__link> <span class=md-ellipsis> Parameter expansion </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/quoting/ class=md-nav__link> <span class=md-ellipsis> Quotes and escaping </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/redirection/ class=md-nav__link> <span class=md-ellipsis> Redirection </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/shellvars/ class=md-nav__link> <span class=md-ellipsis> Special parameters and shell variables </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/words/ class=md-nav__link> <span class=md-ellipsis> Words... </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_10> <label class=md-nav__link for=__nav_9_10 id=__nav_9_10_label tabindex=0> <span class=md-ellipsis> Ccmd </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_10_label aria-expanded=false> <label class=md-nav__title for=__nav_9_10> <span class="md-nav__icon md-icon"></span> Ccmd </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../syntax/ccmd/arithmetic_eval/ class=md-nav__link> <span class=md-ellipsis> Arithmetic evaluation (command) </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/ccmd/c_for/ class=md-nav__link> <span class=md-ellipsis> The C-style for-loop </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/ccmd/case/ class=md-nav__link> <span class=md-ellipsis> The case statement </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/ccmd/classic_for/ class=md-nav__link> <span class=md-ellipsis> The classic for-loop </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/ccmd/conditional_expression/ class=md-nav__link> <span class=md-ellipsis> The conditional expression </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/ccmd/grouping_plain/ class=md-nav__link> <span class=md-ellipsis> Grouping commands </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/ccmd/grouping_subshell/ class=md-nav__link> <span class=md-ellipsis> Grouping commands in a subshell </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/ccmd/if_clause/ class=md-nav__link> <span class=md-ellipsis> The if-clause </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/ccmd/intro/ class=md-nav__link> <span class=md-ellipsis> Bash compound commands </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/ccmd/until_loop/ class=md-nav__link> <span class=md-ellipsis> The until loop </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/ccmd/user_select/ class=md-nav__link> <span class=md-ellipsis> User selections </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/ccmd/while_loop/ class=md-nav__link> <span class=md-ellipsis> The while-loop </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_11> <label class=md-nav__link for=__nav_9_11 id=__nav_9_11_label tabindex=0> <span class=md-ellipsis> Expansion </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_11_label aria-expanded=false> <label class=md-nav__title for=__nav_9_11> <span class="md-nav__icon md-icon"></span> Expansion </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../syntax/expansion/arith/ class=md-nav__link> <span class=md-ellipsis> Arithmetic expansion </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/expansion/brace/ class=md-nav__link> <span class=md-ellipsis> Brace expansion </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/expansion/cmdsubst/ class=md-nav__link> <span class=md-ellipsis> Command substitution </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/expansion/globs/ class=md-nav__link> <span class=md-ellipsis> Pathname expansion (globbing) </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/expansion/intro/ class=md-nav__link> <span class=md-ellipsis> Expansions and substitutions </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/expansion/proc_subst/ class=md-nav__link> <span class=md-ellipsis> Process substitution </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/expansion/tilde/ class=md-nav__link> <span class=md-ellipsis> Tilde expansion </span> </a> </li> <li class=md-nav__item> <a href=../../syntax/expansion/wordsplit/ class=md-nav__link> <span class=md-ellipsis> Word splitting </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_12> <label class=md-nav__link for=__nav_9_12 id=__nav_9_12_label tabindex=0> <span class=md-ellipsis> Grammar </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_12_label aria-expanded=false> <label class=md-nav__title for=__nav_9_12> <span class="md-nav__icon md-icon"></span> Grammar </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../syntax/grammar/parser_exec/ class=md-nav__link> <span class=md-ellipsis> Parser exec </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_13> <label class=md-nav__link for=__nav_9_13 id=__nav_9_13_label tabindex=0> <span class=md-ellipsis> Keywords </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_13_label aria-expanded=false> <label class=md-nav__title for=__nav_9_13> <span class="md-nav__icon md-icon"></span> Keywords </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../syntax/keywords/coproc/ class=md-nav__link> <span class=md-ellipsis> The coproc keyword </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../tags/ class=md-nav__link> <span class=md-ellipsis> Tags </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <nav class=md-tags> <a href=../../tags/#bash class=md-tag>bash</a> <a href=../../tags/#shell class=md-tag>shell</a> <a href=../../tags/#scripting class=md-tag>scripting</a> <a href=../../tags/#tutorial class=md-tag>tutorial</a> <a href=../../tags/#redirection class=md-tag>redirection</a> <a href=../../tags/#redirect class=md-tag>redirect</a> <a href=../../tags/#file class=md-tag>file</a> <a href=../../tags/#descriptor class=md-tag>descriptor</a> </nav> <a href=https://github.com/flokoe/bash-hackers-wiki/edit/main/docs/howto/redirection_tutorial.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <a href=https://github.com/flokoe/bash-hackers-wiki/raw/main/docs/howto/redirection_tutorial.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg> </a> <h1 id=illustrated-redirection-tutorial>Illustrated Redirection Tutorial<a class=headerlink href=#illustrated-redirection-tutorial title="Permanent link">&para;</a></h1> <p>This tutorial is not a complete guide to redirection, it will not cover here docs, here strings, name pipes etc... I just hope it'll help you to understand what things like <code>3&gt;&amp;2</code>, <code>2&gt;&amp;1</code> or <code>1&gt;&amp;3-</code> do.</p> <h1 id=stdin-stdout-stderr>stdin, stdout, stderr<a class=headerlink href=#stdin-stdout-stderr title="Permanent link">&para;</a></h1> <p>When Bash starts, normally, 3 file descriptors are opened, <code>0</code>, <code>1</code> and <code>2</code> also known as standard input (<code>stdin</code>), standard output (<code>stdout</code>) and standard error (<code>stderr</code>).</p> <p>For example, with Bash running in a Linux terminal emulator, you'll see:</p> <div class=highlight><pre><span></span><code># lsof +f g -ap $BASHPID -d 0,1,2
COMMAND   PID USER   FD   TYPE FILE-FLAG DEVICE SIZE/OFF NODE NAME
bash    12135 root    0u   CHR     RW,LG 136,13      0t0   16 /dev/pts/5
bash    12135 root    1u   CHR     RW,LG 136,13      0t0   16 /dev/pts/5
bash    12135 root    2u   CHR     RW,LG 136,13      0t0   16 /dev/pts/5
</code></pre></div> <p>This <code>/dev/pts/5</code> is a pseudo terminal used to emulate a real terminal. Bash reads (<code>stdin</code>) from this terminal and prints via <code>stdout</code> and <code>stderr</code> to this terminal.</p> <div class=highlight><pre><span></span><code>                  ---       +-----------------------+
standard input   ( 0 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard output  ( 1 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard error   ( 2 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+
</code></pre></div> <p>When a command, a compound command, a subshell etc. is executed, it inherits these file descriptors. For instance <code>echo foo</code> will send the text <code>foo</code> to the file descriptor <code>1</code> inherited from the shell, which is connected to <code>/dev/pts/5</code>.</p> <h1 id=simple-redirections>Simple Redirections<a class=headerlink href=#simple-redirections title="Permanent link">&para;</a></h1> <h2 id=output-redirection-n-file>Output Redirection "n&gt; file"<a class=headerlink href=#output-redirection-n-file title="Permanent link">&para;</a></h2> <p><code>&gt;</code> is probably the simplest redirection.</p> <p><code>echo foo &gt; file</code></p> <p>the <code>&gt; file</code> after the command alters the file descriptors belonging to the command <code>echo</code>. It changes the file descriptor <code>1</code> (<code>&gt; file</code> is the same as <code>1&gt;file</code>) so that it points to the file <code>file</code>. They will look like:</p> <div class=highlight><pre><span></span><code>                  ---       +-----------------------+
standard input   ( 0 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard output  ( 1 ) ----&gt;| file                  |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard error   ( 2 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+
</code></pre></div> <p>Now characters written by our command, <code>echo</code>, that are sent to the standard output, i.e., the file descriptor <code>1</code>, end up in the file named <code>file</code>.</p> <p>In the same way, command <code>2&gt; file</code> will change the standard error and will make it point to <code>file</code>. Standard error is used by applications to print errors.</p> <p>What will <code>command 3&gt; file</code> do? It will open a new file descriptor pointing to <code>file</code>. The command will then start with:</p> <div class=highlight><pre><span></span><code>                  ---       +-----------------------+
standard input   ( 0 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard output  ( 1 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard error   ( 2 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+

                  ---       +-----------------------+
new descriptor   ( 3 ) ----&gt;| file                  |
                  ---       +-----------------------+
</code></pre></div> <p>What will the command do with this descriptor? It depends. Often nothing. We will see later why we might want other file descriptors.</p> <h2 id=input-redirection-n-file>Input Redirection "n&lt; file"<a class=headerlink href=#input-redirection-n-file title="Permanent link">&para;</a></h2> <p>When you run a commandusing <code>command &lt; file</code>, it changes the file descriptor <code>0</code> so that it looks like:</p> <div class=highlight><pre><span></span><code>                  ---       +-----------------------+
standard input   ( 0 ) &lt;----| file                  |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard output  ( 1 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard error   ( 2 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+
</code></pre></div> <p>If the command reads from <code>stdin</code>, it now will read from <code>file</code> and not from the console.</p> <p>As with <code>&gt;</code>, <code>&lt;</code> can be used to open a new file descriptor for reading, <code>command 3&lt;file</code>. Later we will see how this can be useful.</p> <h2 id=pipes>Pipes |<a class=headerlink href=#pipes title="Permanent link">&para;</a></h2> <p>What does this <code>|</code> do? Among other things, it connects the standard output of the command on the left to the standard input of the command on the right. That is, it creates a special file, a pipe, which is opened as a write destinaton for the left command, and as a read source for the right command.</p> <div class=highlight><pre><span></span><code>           echo foo               |                cat

 ---       +--------------+               ---       +--------------+
( 0 ) ----&gt;| /dev/pts/5   |     ------&gt;  ( 0 ) ----&gt;|pipe (read)   |
 ---       +--------------+    /          ---       +--------------+
                              /
 ---       +--------------+  /            ---       +--------------+
( 1 ) ----&gt;| pipe (write) | /            ( 1 ) ----&gt;| /dev/pts     |
 ---       +--------------+               ---       +--------------+

 ---       +--------------+               ---       +--------------+
( 2 ) ----&gt;| /dev/pts/5   |              ( 2 ) ----&gt;| /dev/pts/    |
 ---       +--------------+               ---       +--------------+
</code></pre></div> <p>This is possible because the redirections are set up by the shell <strong>before</strong> the commands are executed, and the commands inherit the file descriptors.</p> <h1 id=more-on-file-descriptors>More On File Descriptors<a class=headerlink href=#more-on-file-descriptors title="Permanent link">&para;</a></h1> <h2 id=duplicating-file-descriptor-21>Duplicating File Descriptor 2&gt;&amp;1<a class=headerlink href=#duplicating-file-descriptor-21 title="Permanent link">&para;</a></h2> <p>We have seen how to open (or redirect) file descriptors. Let us see how to duplicate them, starting with the classic <code>2&gt;&amp;1</code>. What does this mean? That something written on the file descriptor <code>2</code> will go where file descriptor <code>1</code> goes. In a shell <code>command 2&gt;&amp;1</code> is not a very interesting example so we will use <code>ls /tmp/ doesnotexist 2&gt;&amp;1 | less</code></p> <div class=highlight><pre><span></span><code>   ls /tmp/ doesnotexist 2&gt;&amp;1     |                   less

 ---       +--------------+              ---       +--------------+
( 0 ) ----&gt;| /dev/pts/5   |     ------&gt; ( 0 ) ----&gt;|from the pipe |
 ---       +--------------+    /   ---&gt;  ---       +--------------+
                              /   /
 ---       +--------------+  /   /       ---       +--------------+
( 1 ) ----&gt;| to the pipe  | /   /       ( 1 ) ----&gt;|  /dev/pts    |
 ---       +--------------+    /         ---       +--------------+
                              /
 ---       +--------------+  /           ---       +--------------+
( 2 ) ----&gt;|  to the pipe | /           ( 2 ) ----&gt;| /dev/pts/    |
 ---       +--------------+              ---       +--------------+
</code></pre></div> <p>Why is it called <em>duplicating</em>? Because after <code>2&gt;&amp;1</code>, we have 2 file descriptors pointing to the same file. Take care not to call this "File Descriptor Aliasing"; if we redirect <code>stdout</code> after <code>2&gt;&amp;1</code> to a file <code>B</code>, file descriptor <code>2</code> will still be opened on the file <code>A</code> where it was. This is often misunderstood by people wanting to redirect both standard input and standard output to the file. Continue reading for more on this.</p> <p>So if you have two file descriptors <code>s</code> and <code>t</code> like:</p> <div class=highlight><pre><span></span><code>                  ---       +-----------------------+
 a descriptor    ( s ) ----&gt;| /some/file            |
                  ---       +-----------------------+
                  ---       +-----------------------+
 a descriptor    ( t ) ----&gt;| /another/file         |
                  ---       +-----------------------+
</code></pre></div> <p>Using a <code>t&gt;&amp;s</code> (where <code>t</code> and <code>s</code> are numbers) it means:</p> <blockquote> <p>Copy whatever file descriptor <code>s</code> contains into file descriptor <code>t</code></p> </blockquote> <p>So you got a copy of this descriptor:</p> <div class=highlight><pre><span></span><code>                  ---       +-----------------------+
 a descriptor    ( s ) ----&gt;| /some/file            |
                  ---       +-----------------------+
                  ---       +-----------------------+
 a descriptor    ( t ) ----&gt;| /some/file            |
                  ---       +-----------------------+
</code></pre></div> <p>Internally each of these is represented by a file descriptor opened by the operating system's <code>fopen</code> calls, and is likely just a pointer to the file which has been opened for reading (<code>stdin</code> or file descriptor <code>0</code>) or writing (<code>stdout</code> /<code>stderr</code>).</p> <p>Note that the file reading or writing positions are also duplicated. If you have already read a line of <code>s</code>, then after <code>t&gt;&amp;s</code> if you read a line from <code>t</code>, you will get the second line of the file.</p> <p>Similarly for output file descriptors, writing a line to file descriptor <code>s</code> will append a line to a file as will writing a line to file descriptor <code>t</code>.</p> <div class="admonition info"> <p class=admonition-title>Tip</p> <p>The syntax is somewhat confusing in that you would think that the arrow would point in the direction of the copy, but it's reversed. So it's <code>target&gt;&amp;source</code> effectively.</p> </div> <p>So, as a simple example (albeit slightly contrived), is the following:</p> <div class=highlight><pre><span></span><code>exec 3&gt;&amp;1         # Copy 1 into 3
exec 1&gt; logfile   # Make 1 opened to write to logfile
lotsa_stdout      # Outputs to fd 1, which writes to logfile
exec 1&gt;&amp;3         # Copy 3 back into 1
echo Done         # Output to original stdout
</code></pre></div> <h2 id=order-of-redirection-ie-file-21-vs-21-file>Order Of Redirection, i.e., "<code>&gt; file 2&gt;&amp;1</code>" vs. "<code>2&gt;&amp;1 &gt;file</code>"<a class=headerlink href=#order-of-redirection-ie-file-21-vs-21-file title="Permanent link">&para;</a></h2> <p>While it doesn't matter where the redirections appears on the command line, their order does matter. They are set up from left to right.</p> <ul> <li><code>2&gt;&amp;1 &gt;file</code></li> </ul> <p>A common error, is to do <code>command 2&gt;&amp;1 &gt; file</code> to redirect both <code>stderr</code> and <code>stdout</code> to <code>file</code>. Let's see what's going on. First we type the command in our terminal, the descriptors look like this:</p> <div class=highlight><pre><span></span><code>                  ---       +-----------------------+
standard input   ( 0 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard output  ( 1 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard error   ( 2 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+
</code></pre></div> <p>Then our shell, Bash sees <code>2&gt;&amp;1</code> so it duplicates 1, and the file descriptor look like this:</p> <div class=highlight><pre><span></span><code>                  ---       +-----------------------+
standard input   ( 0 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard output  ( 1 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard error   ( 2 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+
</code></pre></div> <p>That's right, nothing has changed, 2 was already pointing to the same place as 1. Now Bash sees <code>&gt; file</code> and thus changes <code>stdout</code>:</p> <div class=highlight><pre><span></span><code>                  ---       +-----------------------+
standard input   ( 0 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard output  ( 1 ) ----&gt;| file                  |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard error   ( 2 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+
</code></pre></div> <p>And that's not what we want.</p> <ul> <li><code>&gt;file 2&gt;&amp;1</code></li> </ul> <p>Now let's look at the correct <code>command &gt;file 2&gt;&amp;1</code>. We start as in the previous example, and Bash sees <code>&gt; file</code>:</p> <div class=highlight><pre><span></span><code>                  ---       +-----------------------+
standard input   ( 0 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard output  ( 1 ) ----&gt;| file                  |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard error   ( 2 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+
</code></pre></div> <p>Then it sees our duplication <code>2&gt;&amp;1</code>:</p> <div class=highlight><pre><span></span><code>                  ---       +-----------------------+
standard input   ( 0 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard output  ( 1 ) ----&gt;| file                  |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard error   ( 2 ) ----&gt;| file                  |
                  ---       +-----------------------+
</code></pre></div> <p>And voila, both <code>1</code> and <code>2</code> are redirected to file.</p> <h2 id=why-sed-sfoobar-file-file-doesnt-work>Why sed 's/foo/bar/' file &gt;file Doesn't Work<a class=headerlink href=#why-sed-sfoobar-file-file-doesnt-work title="Permanent link">&para;</a></h2> <p>This is a common error, we want to modify a file using something that reads from a file and writes the result to <code>stdout</code>. To do this, we redirect stdout to the file we want to modify. The problem here is that, as we have seen, the redirections are setup before the command is actually executed.</p> <p>So <strong>BEFORE</strong> sed starts, standard output has already been redirected, with the additional side effect that, because we used &gt;, "file" gets truncated. When <code>sed</code> starts to read the file, it contains nothing.</p> <h2 id=exec>exec<a class=headerlink href=#exec title="Permanent link">&para;</a></h2> <p>In Bash the <code>exec</code> built-in replaces the shell with the specified program. So what does this have to do with redirection? <code>exec</code> also allow us to manipulate the file descriptors. If you don't specify a program, the redirection after <code>exec</code> modifies the file descriptors of the current shell.</p> <p>For example, all the commands after <code>exec 2&gt;file</code> will have file descriptors like:</p> <div class=highlight><pre><span></span><code>                  ---       +-----------------------+
standard input   ( 0 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard output  ( 1 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard error   ( 2 ) ----&gt;| file              |
                  ---       +-----------------------+
</code></pre></div> <p>All the the errors sent to <code>stderr</code> by the commands after the <code>exec 2&gt;file</code> will go to the file, just as if you had the command in a script and ran <code>myscript 2&gt;file</code>.</p> <p><code>exec</code> can be used, if, for instance, you want to log the errors the commands in your script produce, just add <code>exec 2&gt;myscript.errors</code> at the beginning of your script.</p> <p>Let's see another use case. We want to read a file line by line, this is easy, we just do:</p> <div class=highlight><pre><span></span><code> while read -r line;do echo &quot;$line&quot;;done &lt; file
</code></pre></div> <p>Now, we want, after printing each line, to do a pause, waiting for the user to press a key:</p> <div class=highlight><pre><span></span><code> while read -r line;do echo &quot;$line&quot;; read -p &quot;Press any key&quot; -n 1;done &lt; file
</code></pre></div> <p>And, surprise this doesn't work. Why? because the shell descriptor of the while loop looks like:</p> <div class=highlight><pre><span></span><code>                  ---       +-----------------------+
standard input   ( 0 ) ----&gt;| file                  |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard output  ( 1 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard error   ( 2 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+
</code></pre></div> <p>and our read inherits these descriptors, and our command (<code>read -p "Press any key" -n 1</code>) inherits them, and thus reads from file and not from our terminal.</p> <p>A quick look at <code>help read</code> tells us that we can specify a file descriptor from which <code>read</code> should read. Cool. Now let's use <code>exec</code> to get another descriptor:</p> <div class=highlight><pre><span></span><code> exec 3&lt;file
 while read -u 3 line;do echo &quot;$line&quot;; read -p &quot;Press any key&quot; -n 1;done
</code></pre></div> <p>Now the file descriptors look like:</p> <div class=highlight><pre><span></span><code>                  ---       +-----------------------+
standard input   ( 0 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard output  ( 1 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+

                  ---       +-----------------------+
standard error   ( 2 ) ----&gt;| /dev/pts/5            |
                  ---       +-----------------------+

                  ---       +-----------------------+
new descriptor   ( 3 ) ----&gt;| file                  |
                  ---       +-----------------------+
</code></pre></div> <p>and it works.</p> <h2 id=closing-the-file-descriptors>Closing The File Descriptors<a class=headerlink href=#closing-the-file-descriptors title="Permanent link">&para;</a></h2> <p>Closing a file through a file descriptor is easy, just make it a duplicate of -. For instance, let's close <code>stdin &lt;&amp;-</code> and <code>stderr 2&gt;&amp;-</code>:</p> <div class=highlight><pre><span></span><code> bash -c &#39;{ lsof -a -p $$ -d0,1,2 ;} &lt;&amp;- 2&gt;&amp;-&#39;
 COMMAND   PID USER   FD   TYPE DEVICE SIZE NODE NAME
 bash    10668 pgas    1u   CHR  136,2         4 /dev/pts/2
</code></pre></div> <p>we see that inside the <code>{}</code> that only <code>1</code> is still here.</p> <p>Though the OS will probably clean up the mess, it is perhaps a good idea to close the file descriptors you open. For instance, if you open a file descriptor with <code>exec 3&gt;file</code>, all the commands afterwards will inherit it. It's probably better to do something like:</p> <div class=highlight><pre><span></span><code>exec 3&gt;file
.....
#commands that uses 3
.....
exec 3&gt;&amp;-

#we don&#39;t need 3 any more
</code></pre></div> <p>I've seen some people using this as a way to discard, say stderr, using something like: command 2&gt;&amp;-. Though it might work, I'm not sure if you can expect all applications to behave correctly with a closed stderr.</p> <p>When in doubt, I use 2&gt;/dev/null.</p> <h1 id=an-example>An Example<a class=headerlink href=#an-example title="Permanent link">&para;</a></h1> <p>This example comes from <a href=http://groups.google.com/group/comp.unix.shell/browse_thread/thread/64206d154894a4ef/ffe4c2e382034ed9#ffe4c2e382034ed9>this post (ffe4c2e382034ed9)</a> on the comp.unix.shell group:</p> <div class=highlight><pre><span></span><code>{
  {
    cmd1 3&gt;&amp;- |
      cmd2 2&gt;&amp;3 3&gt;&amp;-
  } 2&gt;&amp;1 &gt;&amp;4 4&gt;&amp;- |
    cmd3 3&gt;&amp;- 4&gt;&amp;-

} 3&gt;&amp;2 4&gt;&amp;1
</code></pre></div> <p>The redirections are processed from left to right, but as the file descriptors are inherited we will also have to work from the outer to the inner contexts. We will assume that we run this command in a terminal. Let's start with the outer <code>{ } 3&gt;&amp;2 4&gt;&amp;1</code>.</p> <div class=highlight><pre><span></span><code> ---       +-------------+    ---       +-------------+
( 0 ) ----&gt;| /dev/pts/5  |   ( 3 ) ----&gt;| /dev/pts/5  |
 ---       +-------------+    ---       +-------------+

 ---       +-------------+    ---       +-------------+
( 1 ) ----&gt;| /dev/pts/5  |   ( 4 ) ----&gt;| /dev/pts/5  |
 ---       +-------------+    ---       +-------------+

 ---       +-------------+
( 2 ) ----&gt;| /dev/pts/5  |
 ---       +-------------+
</code></pre></div> <p>We only made 2 copies of <code>stderr</code> and <code>stdout</code>. <code>3&gt;&amp;1 4&gt;&amp;1</code> would have produced the same result here because we ran the command in a terminal and thus <code>1</code> and <code>2</code> go to the terminal. As an exercise, you can start with <code>1</code> pointing to <code>file.stdout</code> and 2 pointing to <code>file.stderr</code>, you will see why these redirections are very nice.</p> <p>Let's continue with the right part of the second pipe: <code>| cmd3 3&gt;&amp;- 4&gt;&amp;-</code></p> <div class=highlight><pre><span></span><code> ---       +-------------+
( 0 ) ----&gt;| 2nd pipe    |
 ---       +-------------+

 ---       +-------------+
( 1 ) ----&gt;| /dev/pts/5  |
 ---       +-------------+

 ---       +-------------+
( 2 ) ----&gt;| /dev/pts/5  |
 ---       +-------------+
</code></pre></div> <p>It inherits the previous file descriptors, closes 3 and 4 and sets up a pipe for reading. Now for the left part of the second pipe <code>{...} 2&gt;&amp;1 &gt;&amp;4 4&gt;&amp;- |</code></p> <div class=highlight><pre><span></span><code> ---       +-------------+  ---       +-------------+
( 0 ) ----&gt;| /dev/pts/5  | ( 3 ) ----&gt;| /dev/pts/5  |
 ---       +-------------+  ---       +-------------+

 ---       +-------------+
( 1 ) ----&gt;| /dev/pts/5  |
 ---       +-------------+

 ---       +-------------+
( 2 ) ----&gt;| 2nd pipe    |
 ---       +-------------+
</code></pre></div> <p>First, The file descriptor <code>1</code> is connected to the pipe (<code>|</code>), then <code>2</code> is made a copy of <code>1</code> and thus is made an fd to the pipe (<code>2&gt;&amp;1</code>), then <code>1</code> is made a copy of <code>4</code> (<code>&gt;&amp;4</code>), then <code>4</code> is closed. These are the file descriptors of the inner <code>{}</code>. Lcet's go inside and have a look at the right part of the first pipe: <code>| cmd2 2&gt;&amp;3 3&gt;&amp;-</code></p> <div class=highlight><pre><span></span><code> ---       +-------------+
( 0 ) ----&gt;| 1st pipe    |
 ---       +-------------+

 ---       +-------------+
( 1 ) ----&gt;| /dev/pts/5  |
 ---       +-------------+

 ---       +-------------+
( 2 ) ----&gt;| /dev/pts/5  |
 ---       +-------------+
</code></pre></div> <p>It inherits the previous file descriptors, connects 0 to the 1<sup>st</sup> pipe, the file descriptor 2 is made a copy of 3, and 3 is closed. Finally, for the left part of the pipe:</p> <div class=highlight><pre><span></span><code> ---       +-------------+
( 0 ) ----&gt;| /dev/pts/5  |
 ---       +-------------+

 ---       +-------------+
( 1 ) ----&gt;| 1st pipe    |
 ---       +-------------+

 ---       +-------------+
( 2 ) ----&gt;| 2nd pipe    |
 ---       +-------------+
</code></pre></div> <p>It also inherits the file descriptor of the left part of the 2<sup>nd</sup> pipe, file descriptor <code>1</code> is connected to the first pipe, <code>3</code> is closed.</p> <p>The purpose of all this becomes clear if we take only the commands:</p> <div class=highlight><pre><span></span><code>                                                   cmd2

                                           ---       +-------------+
                       --&gt;( 0 ) ----&gt;| 1st pipe    |
                      /    ---       +-------------+
                     /
                                    /      ---       +-------------+
         cmd 1                     /      ( 1 ) ----&gt;| /dev/pts/5  |
                  /    ---       +-------------+
                 /
 ---       +-------------+  /      ---       +-------------+
( 0 ) ----&gt;| /dev/pts/5  |     /      ( 2 ) ----&gt;| /dev/pts/5  |
 ---       +-------------+    /        ---       +-------------+
                 /
 ---       +-------------+  /                       cmd3
( 1 ) ----&gt;| 1st pipe    | /
 ---       +-------------+                 ---       +-------------+
                 ------------&gt;( 0 ) ----&gt;| 2nd pipe    |
 ---       +-------------+ /               ---       +-------------+
( 2 ) ----&gt;| 2nd pipe    |/
 ---       +-------------+                 ---       +-------------+
                              ( 1 ) ----&gt;| /dev/pts/5  |
                               ---       +-------------+

                           ---       +-------------+
                          ( 2 ) ----&gt;| /dev/pts/5  |
                       ---       +-------------+
</code></pre></div> <p>As said previously, as an exercise, you can start with <code>1</code> open on a file and <code>2</code> open on another file to see how the <code>stdin</code> from <code>cmd2</code> and <code>cmd3</code> goes to the original <code>stdin</code> and how the <code>stderr</code> goes to the original <code>stderr</code>.</p> <h1 id=syntax>Syntax<a class=headerlink href=#syntax title="Permanent link">&para;</a></h1> <p>I used to have trouble choosing between <code>0&amp;&lt;3</code> <code>3&amp;&gt;1</code> <code>3&gt;&amp;1</code> <code>-&gt;2</code> <code>-&lt;&amp;0</code> <code>&amp;-&lt;0</code> <code>0&lt;&amp;-</code> etc... (I think probably because the syntax is more representative of the result, i.e., the redirection, than what is done, i.e., opening, closing, or duplicating file descriptors).</p> <p>If this fits your situation, then maybe the following "rules" will help you, a redirection is always like the following:</p> <div class=highlight><pre><span></span><code> lhs op rhs
</code></pre></div> <ul> <li> <p><code>lhs</code> is always a file description, i.e., a number:</p> <ul> <li>Either we want to open, duplicate, move or we want to close. If the op is <code>&lt;</code> then there is an implicit 0, if it's <code>&gt;</code> or <code>&gt;&gt;</code>, there is an implicit 1.</li> </ul> </li> <li> <p><code>op</code> is <code>&lt;</code>, <code>&gt;</code>, <code>&gt;&gt;</code>, <code>&gt;|</code>, or <code>&lt;&gt;</code>:</p> <ul> <li><code>&lt;</code> if the file decriptor in <code>lhs</code> will be read, <code>&gt;</code> if it will be written, <code>&gt;&gt;</code> if data is to be appended to the file, <code>&gt;|</code> to overwrite an existing file or <code>&lt;&gt;</code> if it will be both read and written.</li> </ul> </li> <li> <p><code>rhs</code> is the thing that the file descriptor will describe:</p> <ul> <li>It can be the name of a file, the place where another descriptor goes (<code>&amp;1</code>), or, <code>&amp;-</code>, which will close the file descriptor.</li> </ul> </li> </ul> <p>You might not like this description, and find it a bit incomplete or inexact, but I think it really helps to easily find that, say <code>&amp;-&gt;0</code> is incorrect.</p> <h3 id=a-note-on-style>A note on style<a class=headerlink href=#a-note-on-style title="Permanent link">&para;</a></h3> <p>The shell is pretty loose about what it considers a valid redirect. While opinions probably differ, this author has some (strong) recommendations:</p> <ul> <li><strong>Always</strong> keep redirections "tightly grouped" -- that is, <strong>do not</strong> include whitespace anywhere within the redirection syntax except within quotes if required on the RHS (e.g. a filename that contains a space). Since shells fundamentally use whitespace to delimit fields in general, it is visually much clearer for each redirection to be separated by whitespace, but grouped in chunks that contain no unnecessary whitespace.</li> <li><strong>Do</strong> always put a space between each redirection, and between the</li> <li><strong>Always</strong> place redirections together at the very end of a command after all arguments. Never precede a command with a redirect. Never</li> <li><strong>Never</strong> use the Csh <code>&amp;&gt;foo</code> and <code>&gt;&amp;foo</code> shorthand redirects. Use the long form <code>&gt;foo 2&gt;&amp;1</code>. (see: <a href=../../scripting/obsolete/ >obsolete</a>)</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=c1># Good! This is clearly a simple commmand with two arguments and 4 redirections</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>cmd<span class=w> </span>arg1<span class=w> </span>arg2<span class=w> </span>&lt;myFile<span class=w> </span><span class=m>3</span>&lt;<span class=p>&amp;</span><span class=m>1</span><span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span>&gt;<span class=p>&amp;</span><span class=m>2</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=c1># Good!</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=o>{</span><span class=w> </span>cmd1<span class=w> </span><span class=o>&lt;&lt;&lt;</span><span class=s1>&#39;my input&#39;</span><span class=p>;</span><span class=w> </span>cmd2<span class=p>;</span><span class=w> </span><span class=o>}</span><span class=w> </span>&gt;someFile
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=c1># Bad. Is the &quot;1&quot; a file descriptor or an argument to cmd? (answer: it&#39;s the FD). Is the space after the herestring part of the input data? (answer: No).</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=c1># The redirects are also not delimited in any obvious way.</span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>cmd<span class=w> </span><span class=m>2</span>&gt;<span class=p>&amp;</span><span class=w> </span><span class=m>1</span><span class=w> </span><span class=o>&lt;&lt;&lt;</span><span class=w> </span>stuff
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a><span class=c1># Hideously Bad. It&#39;s difficult to tell where the redirects are and whether they&#39;re even valid redirects.</span>
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a><span class=c1># This is in fact one command with one argument, an assignment, and three redirects.</span>
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a><span class=nv>foo</span><span class=o>=</span>bar&lt;baz<span class=w> </span>bork<span class=o>&lt;&lt;&lt;</span><span class=w> </span>blarg&gt;bleh
</code></pre></div> <h1 id=conclusion>Conclusion<a class=headerlink href=#conclusion title="Permanent link">&para;</a></h1> <p>I hope this tutorial worked for you.</p> <p>I lied, I did not explain <code>1&gt;&amp;3-</code>, go check the manual ;-)</p> <p>Thanks to Stéphane Chazelas from whom I stole both the intro and the example....</p> <p>The intro is inspired by this introduction, you'll find a nice exercise there too:</p> <ul> <li><a href=http://tldp.org/LDP/abs/html/ioredirintro.html>A Detailed Introduction to I/O and I/O Redirection</a></li> </ul> <p>The last example comes from this post:</p> <ul> <li><a href=http://groups.google.com/group/comp.unix.shell/browse_thread/thread/64206d154894a4ef/ffe4c2e382034ed9#ffe4c2e382034ed9>comp.unix.shell: piping stdout and stderr to different processes</a></li> </ul> <h1 id=see-also>See also<a class=headerlink href=#see-also title="Permanent link">&para;</a></h1> <ul> <li>Internal: <a href=../../syntax/redirection/ >Redirection syntax overview</a></li> </ul> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 13, 2024</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Created> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 13, 2024</span> </span> </aside> <h2 id=__comments>Comments</h2> <script src=https://giscus.app/client.js data-repo=flokoe/bash-hackers-wiki data-repo-id=R_kgDOJ3Nr6Q data-category="Giscus Page Comments" data-category-id=DIC_kwDOJ3Nr6c4CXq9t data-mapping=pathname data-strict=1 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang=en data-loading=lazy crossorigin=anonymous async>
  </script> <script>
    var giscus = document.querySelector("script[src*=giscus]")

    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate" ? "dark" : "light"
      giscus.setAttribute("data-theme", theme)
    }

    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate" ? "dark" : "light"

          /* Instruct Giscus to change theme */
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.top", "content.action.view", "content.action.edit", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.83f73b43.min.js></script> </body> </html>